<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <img src="" alt="" id="imgAvatar">
        <input type="file" id="avatar">
        <button>上传</button>

        <script>

        async function upload(){
            const inp=document.getElementById("avatar");
            if(inp.files.length==0){
                alert("请选择要上传的文件");
                return ;
            }
            const formData=new FormData();
            //请求体中，数据的格式
            formData.append("imagefile",inp.files[0]);
            const urll="";
            const resp=await fetch(url,{
                method:'POST',
                body:formData
            })

            const result=await resp.json();
            return result;
        }

        //async用在函数表达式中
        document.querySelector('button').onclick=async function(){
            const result=await upload();
            const img=document.getElementById("imgAvater");
            img.src=result.path;
        }


    </script>
    </body>
</html>