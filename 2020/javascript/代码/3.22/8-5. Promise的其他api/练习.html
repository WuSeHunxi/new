<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <script>
        
        // var pro=new Promise((resolve,reject)=>{
        //     resolve(1);
        // })

        // var pro1=Promise.resolve(1);

        // const pro=new Promise((resolve,reject)=>{
        //     resolve(1);
        // })

        // const pro2=pro.then(result=>{
        //     console.log(result);
        // })

        // pro2.then((result)=>{
        //     console.log(result)
        // })

        // const pro=new Promise((resolve,reject)=>{
        //     resolve(1);
        // })

        // const  pro2=new Promise((resolve,reject)=>{
        //     reject(3);
        // })

        // const pro3=pro.then((res)=>{
        //     return pro2;
        // })
        // console.log(pro3)

        // pro3.then(result=>{
        //     console.log(result)
        // },err=>{
        //     console.log(err)
        // })



        //女神表白
        function biaobai(god){
            return new Promise((resolve,reject)=>{
                if(Math.random()<0.05){
                    console.log(god,"同意")
                    resolve(true);
                }else{
                    console.log(god,"拒绝")
                    resolve(false);
                }
            },Math.floor(Math.random()*(3000-1000)+1000))
        }

        let proms=[];
        let hasAgree=false;

        for (let i = 0; i <= 20; i++) {
            const pro=biaobai(`女神${i}`).then(resp=>{
                if(resp){
                    if(hasAgree){
                        console.log("发错短信了");
                    }else{
                        hasAgree=true;
                        console.log("邓哥很开心，终于成功了");
                    }
                }
                return resp;
            })
            proms.push(pro);
        }

        Promise.all(proms).then(result=>{
            console.log(result)
        })

    </script>
    </body>
</html>